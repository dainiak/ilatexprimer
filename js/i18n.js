const I18N_STRINGS_ALL = {
    "ru": {
        "btnCollapseAll": "Свернуть все шаги",
        "btnExpandAll": "Развернуть все шаги",
        "btnResetLocalStorage": "Сбросить прогресс и настройки",
        "collapseExpandSteps": "Свернуть/развернуть все шаги урока",
        "confirmation.CtrlEnter": "Рекомендуется при этом переключиться в режим отображения только по Ctrl+Enter. Переключиться?",
        "confirmation.KaTeXLowerCompatibility": "Отображение формул будет хуже соответствовать «настоящему» LaTeX. Вы уверены?",
        "confirmation.SwitchToKaTeX": "Рекомендуется в этом случае использовать для отображения формул KaTeX. Переключиться на KaTeX?",
        "contentAbout": "<p>Урок задуман, свёрстан и запрограммирован <a rel=\"author\" href=\"https://www.dainiak.com\">Александром Дайняком</a>. Почтовый адрес для связи: <code>dainiak@gmail.com</code></p><p>Урок создан с использованием <a href=\"https://www.mathjax.org/\">MathJax</a>, <a href=\"https://katex.org/\">KaTeX</a>, <a href=\"https://ace.c9.io\">ACE Editor</a>, <a href=\"https://getbootstrap.com/\">Bootstrap</a>, <a href=\"https://jquery.com/\">jQuery</a>. В перечисленных инструментах и в тонкостях использования \\(\\LaTeX\\) автору помогали разбираться форумы <a href=\"https://stackoverflow.com/\">Stack Overflow</a> и <a href=\"https://tex.stackexchange.com/\">LaTeX Stack Exchange</a>.</p>",
        "document.title": "Интерактивное введение в LaTeX",
        "githubForkLink": "Проект на GitHub",
        "headerAbout": "<a href=\"#\">Об уроке</a>",
        "headerDisplayLanguage": "Язык отображения",
        "headerEditorInstances": "Количество окон редактора кода",
        "headerInteractivityMode": "Когда отображать то, что набрано в окне редактирования кода",
        "headerMathEngine": "Движок, используемый для отображения формул при редактировании кода",
        "headerOptions": "Дополнительные настройки",
        "headerSourceResultRatio": "Отношение ширин окон с текстом и исходным кодом (на широком экране)",
        "headerTOC": "<a href=\"#\">Оглавление</a>",
        "headerTheme": "Тема оформления",
        "loadingToastText": "Идёт загрузка страницы…",
        "mainTitle": "Интерактивное введение в \\( \\LaTeX \\)",
        "msg.FinishedLoading": "Загрузка завершена. Поехали!",
        "msg.KatexUnableToDisplayFormula": "(KaTeX не смог отобразить эту формулу)",
        "msg.LoadingSection": "Загружается раздел",
        "msg.ProcessingMathOnPage": "Идёт отрисовка формул. На медленном компьютере может занять десятки секунд…",
        "msg.ProcessingSection": "Обрабатывается раздел",
        "msg.UnableToLoadThisStep": "Не удалось загрузить этот шаг",
        "msg.UnbalancedParenthesis": "((Несбалансированные скобки!))",
        "optionEditorMultiple": "По одному редактору для каждого шага (удобнее)",
        "optionEditorSingle": "Редактор только для активного шага (меньшая нагрузка на браузер)",
        "optionInteractivityHigh": "При любых изменениях кода в редакторе (веселее)",
        "optionInteractivityLow": "Только по нажатии <code>Ctrl+Enter</code> в редакторе (может быть надёжнее)",
        "optionLanguageEN": "english",
        "optionLanguageRU": "русский",
        "optionMathEngineKaTeX": "KaTeX (быстрее, но не всё может корректно отображаться)",
        "optionMathEngineMathJax": "MathJax (чуть медленнее, но вернее)",
        "optionNoSourceCode": "без кода",
        "optionThemeDark": "тёмная",
        "optionThemeLight": "светлая",
    },
    "en": {
        "btnCollapseAll": "Collapse all",
        "btnExpandAll": "Expand all",
        "btnResetLocalStorage": "Reset progress and settings",
        "collapseExpandSteps": "Collapse/expand all steps",
        "confirmation.CtrlEnter": "It is recommended to switch to “Ctrl+Enter only” update mode. Make the switch?",
        "confirmation.KaTeXLowerCompatibility": "KaTeX supports a smaller subset of LaTeX commands than MathJax. Are you sure you want to switch?",
        "confirmation.SwitchToKaTeX": "It is recommended to use KaTeX for math display in this case. Do you want to switch to KaTeX?",
        "contentAbout": "<p>Developed by <a rel=\"author\" href=\"https://www.dainiak.com\">Alex Dainiak</a>. Email: <code>dainiak@gmail.com</code></p><p>The lesson is powered by <a href=\"https://www.mathjax.org/\">MathJax</a>, <a href=\"https://khan.github.io/KaTeX/\">KaTeX</a>, <a href=\"https://ace.c9.io\">ACE Editor</a>, <a href=\"https://getbootstrap.com/\">Bootstrap</a>, <a href=\"https://jquery.com/\">jQuery</a>. While preparing this lesson, the author benefited much from <a href=\"https://stackoverflow.com/\">Stack Overflow</a> and <a href=\"https://tex.stackexchange.com/\">LaTeX Stack Exchange</a>.</p>",
        "document.title": "Interactive Introduction to LaTeX",
        "githubForkLink": "Fork me on GitHub",
        "headerAbout": "<a href=\"#\">About</a>",
        "headerDisplayLanguage": "Language",
        "headerEditorInstances": "Number of source code editor instances",
        "headerInteractivityMode": "When to process the LaTeX source code",
        "headerMathEngine": "Math display engine",
        "headerOptions": "Settings",
        "headerSourceResultRatio": "Result/source code window ratio",
        "headerTOC": "<a href=\"#\">Table of Contents</a>",
        "headerTheme": "Theme",
        "loadingToastText": "Loading…",
        "mainTitle": "Interactive Introduction to \\( \\LaTeX \\)",
        "msg.FinishedLoading": "Finished loading. Have fun!",
        "msg.KatexUnableToDisplayFormula": "(KaTeX was unable to process the formula)",
        "msg.LoadingSection": "Loading section",
        "msg.ProcessingMathOnPage": "Processing math on page. On slow computer this may take a while…",
        "msg.ProcessingSection": "Processing section",
        "msg.UnableToLoadThisStep": "Unable to load this step",
        "msg.UnbalancedParenthesis": "((Несбалансированные скобки!))",
        "optionEditorMultiple": "Separate editor per each step (more convenient)",
        "optionEditorSingle": "Single editor instance (lower memory load)",
        "optionInteractivityHigh": "On any update of the source code (more fun)",
        "optionInteractivityLow": "Only when <code>Ctrl+Enter</code> is pressed in the source code editor (more stable)",
        "optionLanguageEN": "english",
        "optionLanguageRU": "русский",
        "optionMathEngineKaTeX": "KaTeX (faster)",
        "optionMathEngineMathJax": "MathJax (better LaTeX compatibility)",
        "optionNoSourceCode": "no source code",
        "optionThemeDark": "dark",
        "optionThemeLight": "light",
    }
};

function setUILanguage(language=null){
    if(!language)
        language = localStorage.getItem('displayLanguage') || (navigator.languages.indexOf('ru') >= 0 ? 'ru' : 'en');

    window.I18N_STRINGS = I18N_STRINGS_ALL[language];
    window.confirmationSwitchToKaTeX = I18N_STRINGS["confirmation.SwitchToKaTeX"];
    window.confirmationCtrlEnter = I18N_STRINGS["confirmation.CtrlEnter"];
    window.confirmationKaTeXLowerCompatibility = I18N_STRINGS["confirmation.KaTeXLowerCompatibility"];
    window.msgUnbalancedParenthesis = I18N_STRINGS["msg.UnbalancedParenthesis"] || "((Unbalanced parentheses))";
    window.msgKatexUnableToDisplayFormula = I18N_STRINGS["msg.KatexUnableToDisplayFormula"];
    window.msgProcessingMathOnPage = I18N_STRINGS["msg.ProcessingMathOnPage"];
    window.msgLoadingSection = I18N_STRINGS["msg.LoadingSection"];
    window.msgProcessingSection = I18N_STRINGS["msg.ProcessingSection"];
    window.msgUnableToLoadThisStep = I18N_STRINGS["msg.UnableToLoadThisStep"];
    window.msgFinishedLoading = I18N_STRINGS["msg.FinishedLoading"];

    document.title = I18N_STRINGS['document.title'] ? I18N_STRINGS['document.title'] : document.title;
    
    for(let paramId in I18N_STRINGS){
        if(!paramId.includes('.')){
            (document.getElementById(paramId) || {}).innerHTML = I18N_STRINGS[paramId];
        }
    }
    (document.querySelector(`input[type=radio][name=displayLanguage][value=${language}]`) || {}).checked = true;
}